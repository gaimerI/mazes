<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maze Game</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f4f4f4;
        }
        canvas {
            border: 2px solid #000;
            background-color: #fff;
        }
    </style>
</head>
<body>
    <canvas id="maze" width="400" height="400"></canvas>
    <script>
        const canvas = document.getElementById('maze');
        const ctx = canvas.getContext('2d');

        const tileSize = 40; // Size of each maze tile
        const rows = 10;
        const cols = 10;

        // Directions for movement (right, left, down, up)
        const directions = [
            { dx: 1, dy: 0 },
            { dx: -1, dy: 0 },
            { dx: 0, dy: 1 },
            { dx: 0, dy: -1 },
        ];

        // Player and goal positions
        const player = { x: 1, y: 1 }; // Start position
        const goal = { x: cols - 2, y: rows - 2 }; // Goal position

        // Maze array (0: path, 1: wall)
        let maze = Array.from({ length: rows }, () => Array(cols).fill(1));

        // Recursive backtracking algorithm to generate the maze
        function generateMaze(x, y) {
            maze[y][x] = 0; // Mark the current cell as a path
            const shuffledDirections = directions.sort(() => Math.random() - 0.5); // Randomize directions

            for (const { dx, dy } of shuffledDirections) {
                const nx = x + dx * 2; // Move two steps in the x direction
                const ny = y + dy * 2; // Move two steps in the y direction

                if (nx > 0 && ny > 0 && nx < cols - 1 && ny < rows - 1 && maze[ny][nx] === 1) {
                    maze[y + dy][x + dx] = 0; // Knock down the wall between cells
                    generateMaze(nx, ny); // Recursively generate the maze
                }
            }
        }

        // Initialize maze generation
        function initializeMaze() {
            maze = Array.from({ length: rows }, () => Array(cols).fill(1)); // Reset maze
            generateMaze(1, 1); // Start from the top-left corner
        }

        // Draw the maze
        function drawMaze() {
            for (let row = 0; row < rows; row++) {
                for (let col = 0; col < cols; col++) {
                    ctx.fillStyle = maze[row][col] === 1 ? 'black' : 'white';
                    ctx.fillRect(col * tileSize, row * tileSize, tileSize, tileSize);
                }
            }

            // Draw goal
            ctx.fillStyle = 'green';
            ctx.fillRect(goal.x * tileSize, goal.y * tileSize, tileSize, tileSize);
        }

        // Draw the player
        function drawPlayer() {
            ctx.fillStyle = 'blue';
            ctx.fillRect(player.x * tileSize, player.y * tileSize, tileSize, tileSize);
        }

        // Move the player
        function movePlayer(dx, dy) {
            const newX = player.x + dx;
            const newY = player.y + dy;

            // Check for wall collisions
            if (maze[newY][newX] === 0) {
                player.x = newX;
                player.y = newY;
            }

            // Check for goal
            if (player.x === goal.x && player.y === goal.y) {
                alert('You reached the goal!');
                resetGame();
            }
        }

        // Reset game
        function resetGame() {
            player.x = 1;
            player.y = 1;
            initializeMaze();
            drawGame();
        }

        // Handle keyboard input
        document.addEventListener('keydown', (e) => {
            switch (e.key) {
                case 'ArrowUp':
                    movePlayer(0, -1);
                    break;
                case 'ArrowDown':
                    movePlayer(0, 1);
                    break;
                case 'ArrowLeft':
                    movePlayer(-1, 0);
                    break;
                case 'ArrowRight':
                    movePlayer(1, 0);
                    break;
            }
            drawGame();
        });

        // Draw the game
        function drawGame() {
            drawMaze();
            drawPlayer();
        }

        // Initialize game
        initializeMaze();
        drawGame();
    </script>
</body>
</html>
